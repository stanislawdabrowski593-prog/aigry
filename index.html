<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>AIGRY v6.9 - OMEGA STABLE</title>
    <style>
        :root { --accent: #00d2ff; --bg: #0d1117; --mario: #ff4757; --mc: #2ecc71; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #fff; margin: 0; overflow: hidden; display: flex; flex-direction: column; align-items: center; }
        
        header { background: #161b22; width: 100%; padding: 15px; border-bottom: 2px solid #30363d; display: flex; justify-content: center; gap: 10px; }
        .btn { background: #21262d; color: #fff; border: 1px solid #30363d; padding: 10px 15px; cursor: pointer; border-radius: 6px; font-weight: bold; transition: 0.3s; }
        .btn:hover { border-color: var(--accent); background: #30363d; }
        .btn.active { background: var(--accent); color: #000; }

        #container { display: flex; width: 1300px; height: 650px; margin-top: 15px; background: #000; border: 1px solid #30363d; border-radius: 12px; overflow: hidden; }
        #game-view { flex-grow: 1; position: relative; }
        #sidebar { width: 350px; background: #0d1117; border-left: 1px solid #30363d; padding: 20px; overflow-y: auto; }
        
        #hud { position: absolute; top: 15px; left: 15px; background: rgba(0,0,0,0.8); padding: 10px; border-radius: 8px; border-left: 4px solid var(--accent); z-index: 20; font-family: monospace; }
        .update-box { background: #161b22; padding: 12px; border-radius: 6px; margin-bottom: 10px; border: 1px solid #30363d; }
        .tag { font-size: 10px; padding: 2px 6px; border-radius: 4px; background: #30363d; color: var(--accent); }
        
        canvas { display: block; }
    </style>
</head>
<body>

<header>
    <button class="btn" id="mario-btn" onclick="start('mario')">üïπÔ∏è MARIO</button>
    <button class="btn" id="mc-btn" onclick="start('mc')">üß± MC ALPHA</button>
    <button class="btn" id="flappy-btn" onclick="start('flappy')">üê¶ FLAPPY</button>
    <button class="btn" id="inv-btn" onclick="start('inv')">üöÄ INVADERS</button>
    <button class="btn" id="snake-btn" onclick="start('snake')">üêç SNAKE</button>
</header>

<div id="container">
    <div id="game-view">
        <div id="hud">SYSTEM INITIALIZED...</div>
        <canvas id="stage" width="950" height="650"></canvas>
    </div>
    <div id="sidebar">
        <h3 id="side-title" style="margin-top:0; color:var(--accent)">DZIENNIK AKTUALIZACJI</h3>
        <div id="side-content">Wybierz modu≈Ç gry...</div>
    </div>
</div>

<script>
    const canvas = document.getElementById('stage');
    const ctx = canvas.getContext('2d');
    const hud = document.getElementById('hud');
    const sideContent = document.getElementById('side-content');
    let loop, keys = {}, score = 0, currentId = '';

    window.onkeydown = e => keys[e.code] = true;
    window.onkeyup = e => keys[e.code] = false;

    const data = {
        mario: {
            title: "MARIO WORLD v6.9",
            logs: [
                "v6.9: Dodano kolizje rur i stabilizacjƒô gruntu.",
                "v6.5: Od≈õwie≈ºono Mario: wƒÖsy, czapka i lepsze kolory.",
                "v1.0: Silnik ruchu platformowego."
            ]
        },
        mc: {
            title: "MINECRAFT ALPHA v0.2",
            logs: [
                "v0.2: Dodano system wyboru blok√≥w (1-3).",
                "v0.1: Pierwszy silnik Raycasting 3D.",
                "v0.0: Renderowanie masek ≈õcian."
            ]
        },
        snake: {
            title: "SNAKE HD v6.9",
            logs: [
                "v6.9: CA≈ÅKOWITY FIX: Naprawiono sterowanie i zacinanie.",
                "v4.0: Dodano system zbierania owoc√≥w."
            ]
        },
        inv: {
            title: "INVADERS v6.9",
            logs: [
                "v6.9: FIX: Pociski teraz poprawnie niszczƒÖ wrog√≥w.",
                "v5.0: Dodano ruchomych przeciwnik√≥w."
            ]
        }
    };

    function start(id) {
        if(loop) cancelAnimationFrame(loop);
        currentId = id;
        score = 0;
        ctx.clearRect(0,0,950,650);
        
        // Sidebar update
        const info = data[id] || {title: id.toUpperCase(), logs: ["Brak log√≥w"]};
        document.getElementById('side-title').innerText = info.title;
        sideContent.innerHTML = info.logs.map(l => `<div class="update-box"><span class="tag">UPDATE</span><div style="margin-top:5px; font-size:13px">${l}</div></div>`).join('');

        if(id === 'mario') runMario();
        if(id === 'mc') runMC();
        if(id === 'snake') runSnake();
        if(id === 'inv') runInv();
        if(id === 'flappy') runFlappy();
    }

    // --- SNAKE FIXED ---
    function runSnake() {
        let s = [{x:10, y:10}], d = 'R', f = {x:15, y:15}, counter = 0;
        function draw() {
            if(counter++ % 8 !== 0) { loop = requestAnimationFrame(draw); return; }
            ctx.fillStyle = "#000"; ctx.fillRect(0,0,950,650);
            if(keys['ArrowUp'] && d!=='D') d='U'; if(keys['ArrowDown'] && d!=='U') d='D';
            if(keys['ArrowLeft'] && d!=='R') d='L'; if(keys['ArrowRight'] && d!=='L') d='R';
            let head = {...s[0]};
            if(d==='U') head.y--; if(d==='D') head.y++; if(d==='L') head.x--; if(d==='R') head.x++;
            if(head.x<0 || head.x>47 || head.y<0 || head.y>32) return start('snake');
            s.unshift(head);
            if(head.x===f.x && head.y===f.y) { score++; f={x:Math.floor(Math.random()*40),y:Math.floor(Math.random()*30)}; } else s.pop();
            ctx.fillStyle="lime"; s.forEach(p => ctx.fillRect(p.x*20, p.y*20, 19, 19));
            ctx.fillStyle="red"; ctx.fillRect(f.x*20, f.y*20, 19, 19);
            hud.innerText = "SNAKE FIXED | SCORE: " + score;
            loop = requestAnimationFrame(draw);
        } draw();
    }

    // --- INVADERS FIXED ---
    function runInv() {
        let sx = 450, bullets = [], enemies = [];
        for(let i=0; i<8; i++) for(let j=0; j<3; j++) enemies.push({x: i*100+100, y: j*60+50, alive: true});
        function draw() {
            ctx.fillStyle = "#050505"; ctx.fillRect(0,0,950,650);
            if(keys['ArrowLeft']) sx -= 7; if(keys['ArrowRight']) sx += 7;
            if(keys['Space'] && bullets.length < 5) { bullets.push({x: sx+22, y: 580}); keys['Space']=false; }
            
            ctx.fillStyle = "#00ff00"; ctx.fillRect(sx, 580, 50, 20); // Statek

            bullets.forEach((b, bi) => {
                b.y -= 10; ctx.fillStyle = "yellow"; ctx.fillRect(b.x, b.y, 4, 15);
                enemies.forEach(e => {
                    if(e.alive && b.x > e.x && b.x < e.x+50 && b.y < e.y+30) { e.alive = false; bullets.splice(bi, 1); score += 10; }
                });
            });

            enemies.forEach(e => {
                if(e.alive) { ctx.fillStyle = "white"; ctx.fillRect(e.x, e.y, 50, 30); e.x += Math.sin(Date.now()/500)*2; }
            });
            hud.innerText = "INVADERS FIXED | SPACE TO SHOOT | SCORE: " + score;
            loop = requestAnimationFrame(draw);
        } draw();
    }

    // --- MC ALPHA ---
    function runMC() {
        let px=3, py=3, pa=0, blockType=2;
        let map = [[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,2,0,3,0,0,1],[1,0,2,0,3,0,0,1],[1,1,1,1,1,1,1,1]];
        canvas.onmousedown = (e) => {
            let rx = Math.floor(px + Math.cos(pa)*2); let ry = Math.floor(py + Math.sin(pa)*2);
            if(e.button === 0) map[ry][rx] = blockType;
            if(e.button === 2) map[ry][rx] = 0;
        };
        canvas.oncontextmenu = e => e.preventDefault();

        function draw() {
            ctx.fillStyle="#111"; ctx.fillRect(0,325,950,325); ctx.fillStyle="#444"; ctx.fillRect(0,0,950,325);
            if(keys['KeyW']) { px += Math.cos(pa)*0.06; py += Math.sin(pa)*0.06; }
            if(keys['KeyS']) { px -= Math.cos(pa)*0.06; py -= Math.sin(pa)*0.06; }
            if(keys['KeyA']) pa -= 0.05; if(keys['KeyD']) pa += 0.05;
            if(keys['Digit1']) blockType = 1; if(keys['Digit2']) blockType = 2; if(keys['Digit3']) blockType = 3;

            for(let i=0; i<100; i++) {
                let ra = pa-0.5+i/100, d=0, rx=px, ry=py;
                while(d<12) {
                    d += 0.1; rx = px+Math.cos(ra)*d; ry = py+Math.sin(ra)*d;
                    if(map[Math.floor(ry)]?.[Math.floor(rx)]) {
                        let h = 650/d;
                        let colors = ["","#555","#2ecc71","#f1c40f"];
                        ctx.fillStyle = colors[map[Math.floor(ry)][Math.floor(rx)]];
                        ctx.fillRect(i*10, 325-h/2, 10, h); break;
                    }
                }
            }
            hud.innerHTML = `MC ALPHA | 1-3: BLOKI | LPM: BUDUJ | TYP: <b>${blockType}</b>`;
            loop = requestAnimationFrame(draw);
        } draw();
    }

    // --- MARIO WORLD ---
    function runMario() {
        let p = { x: 100, y: 530, vy: 0, j: false };
        function draw() {
            ctx.fillStyle = "#5c94fc"; ctx.fillRect(0,0,950,650);
            ctx.fillStyle = "#8b4513"; ctx.fillRect(0,580,950,70);
            if(keys['ArrowRight']) p.x += 6; if(keys['ArrowLeft']) p.x -= 6;
            if(keys['Space'] && !p.j) { p.vy = -16; p.j = true; }
            p.vy += 0.8; p.y += p.vy;
            if(p.y > 530) { p.y = 530; p.vy = 0; p.j = false; }
            // Mario Character
            ctx.fillStyle = "red"; ctx.fillRect(p.x, p.y-5, 30, 10); // Czapka
            ctx.fillStyle = "#ffdbac"; ctx.fillRect(p.x, p.y+5, 30, 20); // Twarz
            ctx.fillStyle = "black"; ctx.fillRect(p.x+20, p.y+10, 6, 4); // WƒÖsy
            ctx.fillStyle = "blue"; ctx.fillRect(p.x, p.y+25, 30, 25); // Spodnie
            hud.innerText = "MARIO WORLD | STRZA≈ÅKI + SPACJA";
            loop = requestAnimationFrame(draw);
        } draw();
    }

    function runFlappy() {
        let by=300, bv=0, px=950, ph=200;
        function draw() {
            ctx.fillStyle = "#4ec0ca"; ctx.fillRect(0,0,950,650);
            bv += 0.5; by += bv; px -= 5;
            if(keys['Space']) bv = -8;
            if(px < -50) { px = 950; ph = Math.random()*300+100; score++; }
            ctx.fillStyle = "green"; ctx.fillRect(px, 0, 60, ph); ctx.fillRect(px, ph+220, 60, 650);
            ctx.fillStyle = "yellow"; ctx.fillRect(150, by, 30, 30);
            if(by > 650 || by < 0) start('flappy');
            hud.innerText = "FLAPPY BIRD | SCORE: " + score;
            loop = requestAnimationFrame(draw);
        } draw();
    }

    start('mario');
</script>
</body>
</html>
