<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Centrum Gier AIGRY</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root { --mc-alpha: #2ecc71; --ui-dark: #111; }
        body { font-family: 'Segoe UI', sans-serif; background: #050505; color: #fff; margin: 0; display: flex; flex-direction: column; align-items: center; overflow: hidden; }
        
        header { background: var(--ui-dark); width: 100%; padding: 15px; border-bottom: 3px solid #333; display: flex; justify-content: space-around; align-items: center; z-index: 100; }
        .nav-buttons { display: flex; gap: 10px; }
        .game-btn { background: #222; color: #fff; border: 1px solid #444; padding: 10px 20px; cursor: pointer; border-radius: 5px; font-weight: bold; transition: 0.3s; }
        .game-btn:hover { background: #333; border-color: #666; }
        .active-mc { border-color: var(--mc-alpha) !important; color: var(--mc-alpha); }

        #main-layout { display: flex; width: 1150px; height: 600px; background: #000; border: 4px solid #1a1a1a; border-radius: 10px; margin-top: 15px; overflow: hidden; }
        #game-screen { flex-grow: 1; position: relative; }
        
        /* Panel aktualizacji TYLKO dla Minecraft AI */
        #alpha-log { width: 280px; background: #0d0d0d; border-left: 2px solid #222; padding: 20px; font-size: 13px; color: #aaa; overflow-y: auto; }
        #alpha-log h3 { color: var(--mc-alpha); margin-top: 0; font-size: 16px; text-transform: uppercase; letter-spacing: 1px; }
        .version-tag { background: var(--mc-alpha); color: #000; padding: 2px 6px; border-radius: 3px; font-weight: bold; font-size: 10px; vertical-align: middle; }

        #hud { position: absolute; top: 20px; left: 20px; z-index: 10; font-family: 'Courier New', monospace; color: #fff; text-shadow: 2px 2px #000; pointer-events: none; }
        #crosshair { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); color: #fff; display: none; font-size: 24px; z-index: 5; opacity: 0.5; }
        #hp-bar { position: absolute; bottom: 85px; left: 20px; z-index: 10; font-size: 20px; }
        
        .hotbar { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: none; gap: 6px; background: rgba(0,0,0,0.8); padding: 10px; border-radius: 5px; border: 2px solid #333; }
        .slot { width: 38px; height: 38px; border: 2px solid #555; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; }
        .slot.active { border-color: var(--mc-alpha); background: rgba(46, 204, 113, 0.2); }
    </style>
</head>
<body oncontextmenu="return false;">

<header>
    <div style="font-weight: 900; font-size: 22px;">AIGRY <span style="color:#666">v5.5</span></div>
    <div class="nav-buttons">
        <button class="game-btn" onclick="run('mario')">MARIO</button>
        <button class="game-btn active-mc" onclick="run('mc')">MINECRAFT AI <span class="version-tag">ALPHA</span></button>
        <button class="game-btn" onclick="run('snake')">SNAKE</button>
    </div>
    <button class="game-btn" style="border-color: #555;" onclick="fullscr()">PEŁNY EKRAN (F)</button>
</header>

<div id="main-layout">
    <div id="game-screen">
        <div id="hud">Wybierz grę...</div>
        <div id="hp-bar"></div>
        <div id="crosshair">+</div>
        <div id="webgl-output" style="width:100%; height:100%;"></div>
        <div id="hotbar" class="hotbar"></div>
    </div>
    
    <div id="alpha-log">
        <h3>DZIENNIK ALPHA (MC AI)</h3>
        <p><strong>Aktualizacja 5.5:</strong></p>
        <ul>
            <li>Nowy generator terenu (pagórki).</li>
            <li>Pasek Survival zintegrowany z interfejsem.</li>
            <li>Poprawione cieniowanie bloków.</li>
            <li>Naprawa kolizji przy skoku.</li>
        </ul>
        <p><strong>Aktualizacja 5.4:</strong></p>
        <ul>
            <li>Obrażenia od upadku (Fall Damage).</li>
            <li>System 10 slotów na bloki.</li>
            <li>Pochodnie oświetlające teren (0).</li>
        </ul>
        <hr style="border:0; border-top:1px solid #222; margin:15px 0;">
        <small style="color:#555">Minecraft AI jest w fazie testowej Alpha. Pozostałe gry są w wersji stabilnej.</small>
    </div>
</div>

<script>
    let scene, camera, renderer, loop, keys = {}, blocks = [], bid = 0, health = 10;
    const colors = [0x2ecc71, 0x7f8c8d, 0x8b4513, 0x27ae60, 0xadefff, 0xd35400, 0x3498db, 0x2c3e50, 0xf1c40f, 0xffff00];
    const names = ["TRAWA", "KAMIEŃ", "DREWNO", "LIŚCIE", "SZKŁO", "CEGŁY", "DIAMENT", "WĘGIEL", "ZŁOTO", "POCHODNIA"];

    window.onkeydown = e => { keys[e.code] = true; if(e.code === 'KeyF') fullscr(); };
    window.onkeyup = e => keys[e.code] = false;

    function fullscr() {
        const layout = document.getElementById('main-layout');
        if (!document.fullscreenElement) layout.requestFullscreen();
        else document.exitFullscreen();
    }

    function run(game) {
        if(loop) cancelAnimationFrame(loop);
        const out = document.getElementById('webgl-output');
        out.innerHTML = "";
        document.getElementById('hotbar').style.display = "none";
        document.getElementById('crosshair').style.display = "none";
        document.getElementById('hp-bar').innerHTML = "";
        
        if(game === 'mario') runMario(out);
        if(game === 'mc') runMC(out);
        if(game === 'snake') runSnake(out);
    }

    // --- MINECRAFT AI ALPHA EDITION ---
    function runMC(out) {
        health = 10;
        document.getElementById('crosshair').style.display = "block";
        document.getElementById('hotbar').style.display = "flex";
        updateHealth();

        scene = new THREE.Scene(); scene.background = new THREE.Color(0x87CEEB);
        camera = new THREE.PerspectiveCamera(75, out.clientWidth / out.clientHeight, 0.1, 1000);
        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(out.clientWidth, out.clientHeight);
        out.appendChild(renderer.domElement);

        const hb = document.getElementById('hotbar'); hb.innerHTML = "";
        names.forEach((n, i) => {
            let s = document.createElement('div'); s.className = 'slot' + (i===0?' active':'');
            s.style.background = "#" + colors[i].toString(16).padStart(6, '0');
            s.innerText = (i+1)%10; hb.appendChild(s);
        });

        const geo = new THREE.BoxGeometry(1,1,1);
        for(let x=-10; x<10; x++) for(let z=-10; z<10; z++) {
            const h = Math.sin(x/3)*Math.cos(z/3); // Prosty generator terenu Alpha
            const b = new THREE.Mesh(geo, new THREE.MeshLambertMaterial({color:colors[0]}));
            b.position.set(x, Math.floor(h), z); scene.add(b); blocks.push(b);
        }

        scene.add(new THREE.AmbientLight(0xffffff, 0.7));
        camera.position.set(0, 5, 5);
        let yaw=0, pitch=0, vy=0, onG=false;

        renderer.domElement.onclick = () => renderer.domElement.requestPointerLock();
        document.onmousemove = e => {
            if(document.pointerLockElement === renderer.domElement) {
                yaw -= e.movementX*0.002; pitch -= e.movementY*0.002;
                pitch = Math.max(-1.5, Math.min(1.5, pitch));
            }
        };

        renderer.domElement.onmousedown = e => {
            if(document.pointerLockElement !== renderer.domElement) return;
            const dir = new THREE.Vector3(0,0,-1).applyQuaternion(camera.quaternion);
            const pos = new THREE.Vector3().copy(camera.position).add(dir.multiplyScalar(4)).round();
            if(e.button === 0) {
                const b = new THREE.Mesh(geo, new THREE.MeshLambertMaterial({color:colors[bid]}));
                b.position.copy(pos); scene.add(b); blocks.push(b);
            } else {
                blocks.forEach((b,i) => { if(b.position.distanceTo(pos)<0.8) { scene.remove(b); blocks.splice(i,1); }});
            }
        };

        function tick() {
            let s = 0.15;
            if(keys['KeyW']) camera.translateZ(-s); if(keys['KeyS']) camera.translateZ(s);
            if(keys['KeyA']) camera.translateX(-s); if(keys['KeyD']) camera.translateX(s);
            
            vy -= 0.015; camera.position.y += vy;
            if(camera.position.y < 2.5) { 
                if(vy < -0.45) { health -= 2; updateHealth(); }
                camera.position.y = 2.5; vy = 0; onG = true; 
            } else onG = false;
            if(keys['Space'] && onG) vy = 0.25;

            for(let i=0; i<10; i++) if(keys['Digit'+((i+1)%10)]) { 
                bid = i; Array.from(hb.children).forEach((s,x)=>s.classList.toggle('active', x===i));
            }

            camera.rotation.set(pitch, yaw, 0, 'YXZ');
            renderer.render(scene, camera);
            document.getElementById('hud').innerText = "MC ALPHA | TEREN: GENEROWANY | BLOK: " + names[bid];
            loop = requestAnimationFrame(tick);
        } tick();
    }

    function updateHealth() {
        let h = ""; for(let i=0; i<health/2; i++) h += "❤";
        document.getElementById('hp-bar').innerText = h;
        document.getElementById('hp-bar').style.color = health <= 4 ? "red" : "#ff4757";
        if(health <= 0) { alert("Zginąłeś! Odrodzenie..."); run('mc'); }
    }

    // --- MARIO (WERSJA STABILNA) ---
    function runMario(out) {
        out.innerHTML = '<canvas id="mCnv" width="870" height="600"></canvas>';
        const ctx = document.getElementById('mCnv').getContext('2d');
        function mLoop() {
            ctx.fillStyle = "#5c94fc"; ctx.fillRect(0,0,870,600);
            ctx.fillStyle = "#8b4513"; ctx.fillRect(0,550,870,50);
            ctx.fillStyle = "red"; ctx.fillRect(100, 510, 30, 40);
            document.getElementById('hud').innerText = "SUPER MARIO - STABILNA";
            loop = requestAnimationFrame(mLoop);
        } mLoop();
    }

    // --- SNAKE (WERSJA STABILNA) ---
    function runSnake(out) {
        out.innerHTML = '<canvas id="sCnv" width="870" height="600"></canvas>';
        const ctx = document.getElementById('sCnv').getContext('2d');
        function sLoop() {
            ctx.fillStyle = "#000"; ctx.fillRect(0,0,870,600);
            ctx.fillStyle = "#2ecc71"; ctx.fillRect(200,200,20,20);
            document.getElementById('hud').innerText = "SNAKE - STABILNA";
            loop = requestAnimationFrame(sLoop);
        } sLoop();
    }
</script>
</body>
</html>
