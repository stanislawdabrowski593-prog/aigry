<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Minecraft AI: Alpha v5.2</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root { --accent: #2ecc71; --bg: #000; }
        body { font-family: 'Courier New', Courier, monospace; background: var(--bg); color: #fff; margin: 0; overflow: hidden; display: flex; flex-direction: column; align-items: center; }
        header { background: #111; width: 100%; padding: 10px; border-bottom: 2px solid var(--accent); display: flex; justify-content: space-around; align-items: center; }
        #game-box { position: relative; width: 900px; height: 550px; border: 4px solid #333; margin-top: 10px; border-radius: 4px; }
        #hud { position: absolute; top: 15px; left: 15px; z-index: 10; font-size: 16px; color: #fff; text-shadow: 2px 2px #000; pointer-events: none; }
        #cross { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); color: #fff; font-size: 20px; z-index: 5; opacity: 0.6; }
        .hotbar { position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); display: flex; gap: 5px; background: rgba(0,0,0,0.8); padding: 8px; border-radius: 4px; }
        .slot { width: 35px; height: 35px; border: 2px solid #555; display: flex; align-items: center; justify-content: center; font-size: 12px; }
        .slot.active { border-color: var(--accent); box-shadow: 0 0 10px var(--accent); }
        .btn { background: #1a1a1a; color: #fff; border: 1px solid #444; padding: 8px 15px; cursor: pointer; margin: 5px; }
        .btn:hover { background: var(--accent); color: #000; }
    </style>
</head>
<body oncontextmenu="return false;">

<header>
    <div style="font-weight: bold; letter-spacing: 2px;">MC AI <span style="color:var(--accent)">ALPHA 5.2</span></div>
    <div>
        <button class="btn" onclick="location.reload()">RESTART</button>
        <button class="btn" onclick="toggleFS()">FULLSCREEN (F)</button>
    </div>
</header>

<div id="game-box">
    <div id="hud">ALPHA 5.2 | WSAD: Ruch | SPACE: Skok | 1-0: Bloki</div>
    <div id="cross">+</div>
    <div id="canvas-container" style="width:100%; height:100%;"></div>
    <div id="hotbar" class="hotbar"></div>
</div>

<script>
    let scene, camera, renderer, loop, keys = {}, blocks = [], bid = 0;
    const colors = [0x2ecc71, 0x7f8c8d, 0x8b4513, 0x228b22, 0xadefff, 0xd35400, 0xf1c40f, 0x3498db, 0x2c3e50, 0xffff00]; // 0 to Pochodnia
    const names = ["TRAWA", "KAMIEŃ", "PIEŃ", "LIŚCIE", "SZKŁO", "CEGŁY", "ZŁOTO", "DIAMENT", "WĘGIEL", "POCHODNIA"];

    window.onkeydown = e => { keys[e.code] = true; if(e.code === 'KeyF') toggleFS(); };
    window.onkeyup = e => keys[e.code] = false;

    function toggleFS() {
        const b = document.getElementById('game-box');
        if (!document.fullscreenElement) b.requestFullscreen(); else document.exitFullscreen();
    }

    function initMC() {
        scene = new THREE.Scene(); scene.background = new THREE.Color(0x87CEEB);
        camera = new THREE.PerspectiveCamera(75, 900/550, 0.1, 1000);
        renderer = new THREE.WebGLRenderer({ antialias: false });
        renderer.setSize(900, 550);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // Hotbar
        const hb = document.getElementById('hotbar');
        names.forEach((n, i) => {
            let s = document.createElement('div'); s.className = 'slot' + (i===0?' active':'');
            s.style.background = "#" + colors[i].toString(16).padStart(6, '0');
            s.innerText = (i+1)%10; hb.appendChild(s);
        });

        // Generowanie terenu Alpha
        const geo = new THREE.BoxGeometry(1,1,1);
        for(let x=-10; x<10; x++) {
            for(let z=-10; z<10; z++) {
                const h = Math.floor(Math.random() * 2); 
                const mat = new THREE.MeshLambertMaterial({ color: colors[0] });
                const b = new THREE.Mesh(geo, mat);
                b.position.set(x, h, z); scene.add(b); blocks.push(b);
            }
        }

        const amb = new THREE.AmbientLight(0xffffff, 0.5); scene.add(amb);
        const sun = new THREE.DirectionalLight(0xffffff, 0.8);
        sun.position.set(10, 20, 10); scene.add(sun);

        camera.position.set(0, 3, 5);
        let yaw = 0, pitch = 0, vy = 0, onGround = false;

        renderer.domElement.onclick = () => renderer.domElement.requestPointerLock();
        document.addEventListener('mousemove', e => {
            if(document.pointerLockElement === renderer.domElement) {
                yaw -= e.movementX * 0.002; pitch -= e.movementY * 0.002;
                pitch = Math.max(-1.5, Math.min(1.5, pitch));
            }
        });

        renderer.domElement.onmousedown = e => {
            if(document.pointerLockElement !== renderer.domElement) return;
            const dir = new THREE.Vector3(0,0,-1).applyQuaternion(camera.quaternion);
            const pos = new THREE.Vector3().copy(camera.position).add(dir.multiplyScalar(4)).round();
            
            if(e.button === 0) { // Buduj
                const isLight = (bid === 9);
                const m = isLight ? new THREE.MeshStandardMaterial({color: colors[9], emissive: colors[9]}) : new THREE.MeshLambertMaterial({color: colors[bid], transparent: bid===4, opacity: bid===4?0.6:1});
                const b = new THREE.Mesh(geo, m);
                b.position.copy(pos); scene.add(b); blocks.push(b);
                if(isLight) { const pL = new THREE.PointLight(0xffff00, 1, 10); pL.position.copy(pos); scene.add(pL); }
            } else { // Usuń
                blocks.forEach((b, i) => { if(b.position.distanceTo(pos) < 0.8) { scene.remove(b); blocks.splice(i, 1); }});
            }
        };

        function animate() {
            // Fizyka i Ruch
            let speed = 0.12;
            if(keys['KeyW']) camera.translateZ(-speed); if(keys['KeyS']) camera.translateZ(speed);
            if(keys['KeyA']) camera.translateX(-speed); if(keys['KeyD']) camera.translateX(speed);
            
            // Grawitacja Alpha
            vy -= 0.015; camera.position.y += vy;
            if(camera.position.y < 2.5) { camera.position.y = 2.5; vy = 0; onGround = true; } else { onGround = false; }
            if(keys['Space'] && onGround) { vy = 0.25; }

            // Wybór bloku
            for(let i=0; i<10; i++) {
                if(keys['Digit' + ((i+1)%10)]) {
                    bid = i; 
                    Array.from(hb.children).forEach((s, idx) => s.classList.toggle('active', idx === bid));
                }
            }

            camera.rotation.set(pitch, yaw, 0, 'YXZ');
            renderer.render(scene, camera);
            loop = requestAnimationFrame(animate);
        }
        animate();
    }

    initMC();
</script>
</body>
</html>
