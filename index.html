<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>AIGRY v6.7 - TOTAL REPAIR</title>
    <style>
        body { font-family: sans-serif; background: #050505; color: white; margin: 0; display: flex; flex-direction: column; align-items: center; }
        header { background: #1a1a1a; width: 100%; padding: 15px; border-bottom: 3px solid #333; display: flex; justify-content: center; gap: 10px; }
        .btn { background: #333; color: white; border: 1px solid #555; padding: 10px 15px; cursor: pointer; font-weight: bold; border-radius: 4px; }
        .btn:hover { background: #00d2ff; color: black; }
        
        #main { display: flex; width: 1200px; height: 600px; margin-top: 20px; border: 4px solid #222; background: #000; }
        #game-area { flex-grow: 1; position: relative; }
        #sidebar { width: 300px; background: #111; border-left: 2px solid #333; padding: 20px; font-size: 14px; }
        
        #hud { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.8); padding: 8px; border: 1px solid #00d2ff; z-index: 10; font-family: monospace; }
        canvas { display: block; background: #000; }
        .log-v { color: #00d2ff; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>

<header>
    <button class="btn" onclick="init('mario')">MARIO</button>
    <button class="btn" onclick="init('mc')">MINECRAFT</button>
    <button class="btn" onclick="init('flappy')">FLAPPY</button>
    <button class="btn" onclick="init('invaders')">INVADERS</button>
    <button class="btn" onclick="init('snake')">SNAKE</button>
</header>

<div id="main">
    <div id="game-area">
        <div id="hud">Kliknij przycisk powyżej ⬆️</div>
        <canvas id="screen" width="900" height="600"></canvas>
    </div>
    <div id="sidebar">
        <h3 id="side-t">WITAJ</h3>
        <div id="side-l">Wybierz grę, aby zobaczyć zmiany.</div>
    </div>
</div>

<script>
    const canvas = document.getElementById('screen');
    const ctx = canvas.getContext('2d');
    const hud = document.getElementById('hud');
    const sideT = document.getElementById('side-t');
    const sideL = document.getElementById('side-l');
    
    let loop, keys = {}, score = 0;

    window.onkeydown = e => keys[e.code] = true;
    window.onkeyup = e => keys[e.code] = false;

    const logs = {
        mario: ["v6.7: Naprawiono błąd startu", "v6.1: Dodano wąsy i czapkę", "v1.0: Start projektu"],
        mc: ["v6.7: Zoptymalizowano Raycasting", "v6.0: Dodano kolory ścian", "v5.0: Silnik pseudo-3D"],
        flappy: ["v6.7: Nowy hit-box ptaka", "v6.3: Premiera gry"],
        invaders: ["v6.7: Poprawiony system strzału", "v6.5: Premiera gry"],
        snake: ["v6.7: Poprawiona szybkość", "v1.0: Klasyczny Snake"]
    };

    function init(game) {
        if (loop) cancelAnimationFrame(loop);
        ctx.clearRect(0, 0, 900, 600);
        score = 0;
        
        // Aktualizacja Sidebaru
        sideT.innerText = game.toUpperCase() + " LOGS";
        sideL.innerHTML = logs[game].map(l => `<div class="log-v">${l.split(':')[0]}</div><div>${l.split(':')[1]}</div>`).join('');

        if (game === 'mario') runMario();
        if (game === 'mc') runMC();
        if (game === 'flappy') runFlappy();
        if (game === 'invaders') runInvaders();
        if (game === 'snake') runSnake();
    }

    function runMario() {
        let p = { x: 100, y: 480, vy: 0, j: false };
        function tick() {
            ctx.fillStyle = "#5c94fc"; ctx.fillRect(0,0,900,600);
            ctx.fillStyle = "#8b4513"; ctx.fillRect(0,530,900,70);
            if(keys['ArrowRight']) p.x += 5; if(keys['ArrowLeft']) p.x -= 5;
            if((keys['Space'] || keys['ArrowUp']) && !p.j) { p.vy = -15; p.j = true; }
            p.vy += 0.8; p.y += p.vy;
            if(p.y > 480) { p.y = 480; p.vy = 0; p.j = false; }
            // Mario
            ctx.fillStyle = "red"; ctx.fillRect(p.x, p.y, 40, 50);
            ctx.fillStyle = "#ffdbac"; ctx.fillRect(p.x+10, p.y+5, 25, 20);
            hud.innerText = "MARIO: Strzałki i Spacja";
            loop = requestAnimationFrame(tick);
        } tick();
    }

    function runMC() {
        let px = 2, py = 2, pa = 0;
        const map = [[1,1,1,1,1,1],[1,0,0,0,0,1],[1,0,2,0,0,1],[1,0,0,3,0,1],[1,1,1,1,1,1]];
        function tick() {
            ctx.fillStyle = "#333"; ctx.fillRect(0,300,900,300);
            ctx.fillStyle = "#87ceeb"; ctx.fillRect(0,0,900,300);
            if(keys['KeyW']) { px += Math.cos(pa)*0.07; py += Math.sin(pa)*0.07; }
            if(keys['KeyA']) pa -= 0.05; if(keys['KeyD']) pa += 0.05;
            for(let i=0; i<90; i++) {
                let ra = pa-0.5+i/90, d=0, rx=px, ry=py;
                while(d<12) { d+=0.1; rx=px+Math.cos(ra)*d; ry=py+Math.sin(ra)*d;
                    if(map[Math.floor(ry)] && map[Math.floor(ry)][Math.floor(rx)]) {
                        let h = 600/d; ctx.fillStyle = `hsl(${map[Math.floor(ry)][Math.floor(rx)]*100}, 40%, 40%)`;
                        ctx.fillRect(i*10, 300-h/2, 10, h); break;
                    }
                }
            }
            hud.innerText = "MINECRAFT: W, A, D";
            loop = requestAnimationFrame(tick);
        } tick();
    }

    function runFlappy() {
        let by = 300, bv = 0, px = 900, ph = 200;
        function tick() {
            ctx.fillStyle = "#4ec0ca"; ctx.fillRect(0,0,900,600);
            bv += 0.5; by += bv; px -= 5;
            if(keys['Space']) bv = -8;
            if(px < -50) { px = 900; ph = Math.random()*300+100; score++; }
            ctx.fillStyle = "green"; ctx.fillRect(px, 0, 50, ph); ctx.fillRect(px, ph+200, 50, 600);
            ctx.fillStyle = "yellow"; ctx.fillRect(150, by, 30, 30);
            if(by > 600 || by < 0) init('flappy');
            hud.innerText = "FLAPPY: Spacja! Wynik: " + score;
            loop = requestAnimationFrame(tick);
        } tick();
    }

    function runInvaders() {
        let sx = 400, bx = -20, by = -20, enemies = [];
        for(let i=0; i<6; i++) enemies.push({x: i*120+100, y: 80});
        function tick() {
            ctx.fillStyle = "black"; ctx.fillRect(0,0,900,600);
            if(keys['ArrowLeft']) sx -= 7; if(keys['ArrowRight']) sx += 7;
            if(keys['Space'] && by < 0) { bx = sx + 20; by = 550; }
            if(by > 0) { by -= 10; ctx.fillStyle = "yellow"; ctx.fillRect(bx, by, 5, 15); }
            ctx.fillStyle = "lime"; ctx.fillRect(sx, 550, 40, 20);
            enemies.forEach((e, i) => {
                ctx.fillStyle = "white"; ctx.fillRect(e.x, e.y, 40, 30);
                if(bx > e.x && bx < e.x+40 && by < e.y+30) { enemies.splice(i,1); by = -20; score += 10; }
            });
            if(enemies.length === 0) { alert("WIN!"); init('invaders'); }
            hud.innerText = "INVADERS: Strzałki i Spacja";
            loop = requestAnimationFrame(tick);
        } tick();
    }

    function runSnake() {
        let s = [{x:10, y:10}], d = 'R', f = {x:15, y:15}, counter = 0;
        function tick() {
            if(counter++ % 8 !== 0) { loop = requestAnimationFrame(tick); return; }
            ctx.fillStyle = "black"; ctx.fillRect(0,0,900,600);
            if(keys['ArrowUp'] && d !== 'D') d = 'U';
            if(keys['ArrowDown'] && d !== 'U') d = 'D';
            if(keys['ArrowLeft'] && d !== 'R') d = 'L';
            if(keys['ArrowRight'] && d !== 'L') d = 'R';
            let h = {...s[0]};
            if(d==='U') h.y--; if(d==='D') h.y++; if(d==='L') h.x--; if(d==='R') h.x++;
            s.unshift(h);
            if(h.x === f.x && h.y === f.y) { score++; f = {x:Math.floor(Math.random()*40), y:Math.floor(Math.random()*25)}; } else s.pop();
            ctx.fillStyle = "lime"; s.forEach(p => ctx.fillRect(p.x*20, p.y*20, 18, 18));
            ctx.fillStyle = "red"; ctx.fillRect(f.x*20, f.y*20, 18, 18);
            hud.innerText = "SNAKE: Wynik " + score;
            loop = requestAnimationFrame(tick);
        } tick();
    }
</script>
</body>
</html>
