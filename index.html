<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>AIGRY v6.6 - Contextual Platform</title>
    <style>
        :root { --accent: #00d2ff; --bg: #050505; --panel: #111; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #fff; margin: 0; display: flex; flex-direction: column; align-items: center; overflow: hidden; }
        
        header { background: var(--panel); width: 100%; padding: 15px; border-bottom: 2px solid #333; display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; }
        .btn { background: #222; color: #fff; border: 1px solid #444; padding: 10px 18px; cursor: pointer; border-radius: 5px; font-weight: bold; transition: 0.2s; font-size: 11px; }
        .btn:hover { background: var(--accent); color: #000; }

        #main-container { display: flex; width: 1250px; height: 620px; margin-top: 15px; border: 3px solid #222; border-radius: 10px; overflow: hidden; background: #000; }
        #game-view { flex-grow: 1; position: relative; }
        #sidebar { width: 300px; background: #0d0d0d; border-left: 2px solid #222; padding: 20px; overflow-y: auto; }
        
        .log-item { margin-bottom: 15px; border-bottom: 1px solid #222; padding-bottom: 10px; }
        .log-ver { color: var(--accent); font-weight: bold; font-size: 12px; }
        .log-text { color: #888; font-size: 13px; margin-top: 4px; }
        
        #hud { position: absolute; top: 15px; left: 15px; background: rgba(0,0,0,0.8); padding: 10px; font-family: monospace; z-index: 10; border-radius: 4px; border: 1px solid var(--accent); }
        canvas { display: block; }
    </style>
</head>
<body>

<header>
    <button class="btn" onclick="play('mario')">MARIO WORLD</button>
    <button class="btn" onclick="play('mc')">MINECRAFT AI</button>
    <button class="btn" onclick="play('flappy')">FLAPPY BIRD</button>
    <button class="btn" onclick="play('invaders')">INVADERS</button>
    <button class="btn" onclick="play('snake')">SNAKE HD</button>
</header>

<div id="main-container">
    <div id="game-view">
        <div id="hud">Gotowy do gry! Wybierz tytuł.</div>
        <canvas id="screen" width="950" height="620"></canvas>
    </div>
    <div id="sidebar">
        <h2 id="side-title" style="margin-top:0; font-size: 18px;">WITAJ</h2>
        <div id="side-logs">Wybierz grę, aby zobaczyć historię aktualizacji.</div>
    </div>
</div>

<script>
    const canvas = document.getElementById('screen');
    const ctx = canvas.getContext('2d');
    const hud = document.getElementById('hud');
    const sideTitle = document.getElementById('side-title');
    const sideLogs = document.getElementById('side-logs');
    let loop, keys = {}, score = 0;

    const changelogs = {
        mario: {
            title: "MARIO WORLD LOG",
            updates: [
                {v: "v6.6", t: "Naprawiono fizykę skoku i kolizje z ziemią."},
                {v: "v6.1", t: "Odświeżono postać: dodano czapkę, oczy i wąsy."},
                {v: "v1.0", t: "Podstawowy silnik platformowy."}
            ]
        },
        mc: {
            title: "MINECRAFT AI LOG",
            updates: [
                {v: "v6.6", t: "Stabilizacja silnika Pseudo-3D Raycasting."},
                {v: "v5.9", t: "Dodano rudy złota i lapisu (Klawisze 1-4)."},
                {v: "v5.0", t: "Pierwsza faza budowania w 3D."}
            ]
        },
        flappy: {
            title: "FLAPPY BIRD LOG",
            updates: [
                {v: "v6.6", t: "Nowa gra na platformie! Płynne 60 FPS."},
                {v: "v6.5", t: "Dodano system losowania wysokości rur."}
            ]
        },
        invaders: {
            title: "INVADERS LOG",
            updates: [
                {v: "v6.6", t: "Balans trudności: wolniejsi kosmici."},
                {v: "v6.4", t: "Premiera gry: obrona bazy przed najeźdźcami."}
            ]
        },
        snake: {
            title: "SNAKE HD LOG",
            updates: [
                {v: "v6.0", t: "Dodano złote owoce dające +50 pkt."},
                {v: "v2.0", t: "Naprawiono błąd przechodzenia przez ściany."}
            ]
        }
    };

    window.onkeydown = e => keys[e.code] = true;
    window.onkeyup = e => keys[e.code] = false;

    function play(game) {
        if(loop) cancelAnimationFrame(loop);
        score = 0;
        updateSidebar(game);
        if(game === 'mario') runMario();
        if(game === 'mc') runMC();
        if(game === 'flappy') runFlappy();
        if(game === 'invaders') runInvaders();
        if(game === 'snake') runSnake();
    }

    function updateSidebar(game) {
        const data = changelogs[game];
        sideTitle.innerText = data.title;
        sideTitle.style.color = "var(--accent)";
        sideLogs.innerHTML = data.updates.map(u => `
            <div class="log-item">
                <div class="log-ver">${u.v}</div>
                <div class="log-text">${u.t}</div>
            </div>
        `).join('');
    }

    // --- GRY (UPROSZCZONE I STABILNE) ---
    function runMario() {
        let p = { x: 50, y: 500, vy: 0, j: false };
        function update() {
            ctx.fillStyle = "#5c94fc"; ctx.fillRect(0,0,950,620);
            ctx.fillStyle = "#8b4513"; ctx.fillRect(0,550,950,70);
            if(keys['ArrowRight']) p.x += 5; if(keys['ArrowLeft']) p.x -= 5;
            if(keys['Space'] && !p.j) { p.vy = -15; p.j = true; }
            p.vy += 0.8; p.y += p.vy;
            if(p.y > 500) { p.y = 500; p.vy = 0; p.j = false; }
            ctx.fillStyle = "red"; ctx.fillRect(p.x, p.y, 40, 50); // Mario
            ctx.fillStyle = "#ffdbac"; ctx.fillRect(p.x+10, p.y+5, 30, 20); // Twarz
            hud.innerText = "MARIO WORLD | Score: " + score;
            loop = requestAnimationFrame(update);
        } update();
    }

    function runMC() {
        let px = 2, py = 2, pa = 0;
        const map = [[1,1,1,1,1],[1,0,0,0,1],[1,0,2,0,1],[1,0,0,0,1],[1,1,1,1,1]];
        function update() {
            ctx.fillStyle = "#222"; ctx.fillRect(0,310,950,310);
            ctx.fillStyle = "#87ceeb"; ctx.fillRect(0,0,950,310);
            if(keys['KeyW']) { px += Math.cos(pa)*0.06; py += Math.sin(pa)*0.06; }
            if(keys['KeyA']) pa -= 0.05; if(keys['KeyD']) pa += 0.05;
            for(let i=0; i<100; i++){
                let ra = pa-0.5+i/100, d=0, rx=px, ry=py;
                while(d<10){ d+=0.05; rx=px+Math.cos(ra)*d; ry=py+Math.sin(ra)*d;
                    if(map[Math.floor(ry)][Math.floor(rx)]){
                        let h = 600/d; ctx.fillStyle = `hsl(${map[Math.floor(ry)][Math.floor(rx)]*120}, 50%, 40%)`;
                        ctx.fillRect(i*10, 310-h/2, 10, h); break;
                    }
                }
            }
            hud.innerText = "MINECRAFT AI | WASD: Ruch";
            loop = requestAnimationFrame(update);
        } update();
    }

    function runFlappy() {
        let by = 300, bv = 0, px = 950, ph = 200;
        function update() {
            ctx.fillStyle = "#4ec0ca"; ctx.fillRect(0,0,950,620);
            bv += 0.5; by += bv; px -= 5;
            if(keys['Space']) bv = -8;
            if(px < -50) { px = 950; ph = Math.random()*300+100; score++; }
            ctx.fillStyle = "green"; ctx.fillRect(px, 0, 50, ph); ctx.fillRect(px, ph+200, 50, 620);
            ctx.fillStyle = "yellow"; ctx.fillRect(150, by, 30, 30);
            if(by > 620 || by < 0) play('flappy');
            hud.innerText = "FLAPPY BIRD | Wynik: " + score;
            loop = requestAnimationFrame(update);
        } update();
    }

    function runInvaders() {
        let sx = 450, bx = -10, by = -10, enemies = [];
        for(let i=0; i<6; i++) enemies.push({x: i*120+100, y: 60});
        function update() {
            ctx.fillStyle = "#000"; ctx.fillRect(0,0,950,620);
            if(keys['ArrowLeft']) sx -= 7; if(keys['ArrowRight']) sx += 7;
            if(keys['Space'] && by < 0) { bx = sx + 20; by = 550; }
            if(by > 0) { by -= 10; ctx.fillStyle = "yellow"; ctx.fillRect(bx, by, 5, 15); }
            ctx.fillStyle = "#0f0"; ctx.fillRect(sx, 550, 45, 25);
            ctx.fillStyle = "white";
            enemies.forEach((e, i) => { 
                ctx.fillRect(e.x, e.y, 40, 30);
                if(bx > e.x && bx < e.x+40 && by < e.y+30) { enemies.splice(i,1); by = -10; score += 10; }
            });
            if(enemies.length === 0) { alert("WYGRAŁEŚ!"); play('invaders'); }
            hud.innerText = "SPACE INVADERS | Score: " + score;
            loop = requestAnimationFrame(update);
        } update();
    }

    function runSnake() {
        let s = [{x:10, y:10}], d = 'R', f = {x:15, y:15}, c = 0;
        function update() {
            if(c++ % 7 !== 0) { loop = requestAnimationFrame(update); return; }
            ctx.fillStyle = "#000"; ctx.fillRect(0,0,950,620);
            if(keys['ArrowUp'] && d!=='D') d='U'; if(keys['ArrowDown'] && d!=='U') d='D';
            if(keys['ArrowLeft'] && d!=='R') d='L'; if(keys['ArrowRight'] && d!=='L') d='R';
            let h = {...s[0]};
            if(d==='U') h.y--; if(d==='D') h.y++; if(d==='L') h.x--; if(d==='R') h.x++;
            s.unshift(h);
            if(h.x === f.x && h.y === f.y) { score++; f = {x:Math.floor(Math.random()*45), y:Math.floor(Math.random()*28)}; } else s.pop();
            ctx.fillStyle = "lime"; s.forEach(p => ctx.fillRect(p.x*20, p.y*20, 18, 18));
            ctx.fillStyle = "red"; ctx.fillRect(f.x*20, f.y*20, 18, 18);
            hud.innerText = "SNAKE HD | Wynik: " + score;
            loop = requestAnimationFrame(update);
        } update();
    }
</script>
</body>
</html>
