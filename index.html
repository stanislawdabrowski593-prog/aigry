<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>AIGRY v6.0 - Multi-Update</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root { --mc: #2ecc71; --mario: #e74c3c; --snake: #f1c40f; --bg: #050505; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #fff; margin: 0; display: flex; flex-direction: column; align-items: center; overflow: hidden; }
        header { background: #111; width: 100%; padding: 12px; border-bottom: 3px solid #333; display: flex; justify-content: space-around; align-items: center; }
        .nav { display: flex; gap: 15px; }
        .btn { background: #222; color: #fff; border: 1px solid #444; padding: 10px 20px; cursor: pointer; border-radius: 6px; font-weight: bold; transition: 0.2s; }
        .btn:hover { transform: scale(1.05); border-color: #fff; }

        #game-layout { display: flex; width: 1280px; height: 600px; background: #000; border: 4px solid #1a1a1a; border-radius: 12px; margin-top: 15px; overflow: hidden; }
        #game-viewport { flex-grow: 1; position: relative; }
        #update-sidebar { width: 300px; background: #0d0d0d; border-left: 2px solid #222; padding: 20px; font-size: 13px; color: #bbb; overflow-y: auto; }
        #update-sidebar h3 { margin-top: 0; padding-bottom: 10px; border-bottom: 1px solid #333; }

        #hud { position: absolute; top: 15px; left: 15px; z-index: 10; font-family: monospace; font-size: 18px; text-shadow: 2px 2px #000; }
        #crosshair { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); color: #fff; font-size: 24px; display: none; }
    </style>
</head>
<body>

<header>
    <div style="font-weight: 900; font-size: 22px;">AIGRY <span style="color:var(--mc)">PLATFORM v6.0</span></div>
    <div class="nav">
        <button class="btn" style="border-bottom: 3px solid var(--mario)" onclick="start('mario')">MARIO</button>
        <button class="btn" style="border-bottom: 3px solid var(--mc)" onclick="start('mc')">MINECRAFT AI</button>
        <button class="btn" style="border-bottom: 3px solid var(--snake)" onclick="start('snake')">SNAKE</button>
    </div>
</header>

<div id="game-layout">
    <div id="game-viewport">
        <div id="hud">Wybierz grę, aby zobaczyć nowości!</div>
        <div id="crosshair">+</div>
        <div id="canvas-container" style="width:100%; height:100%;"></div>
    </div>
    <div id="update-sidebar">
        <h3 id="side-title">AKTUALIZACJE</h3>
        <div id="side-content">Wybierz grę z menu u góry, aby zobaczyć listę zmian dla konkretnego tytułu.</div>
    </div>
</div>

<script>
    let loop, keys = {}, score = 0;
    const viewport = document.getElementById('canvas-container');
    const hud = document.getElementById('hud');
    const sideTitle = document.getElementById('side-title');
    const sideContent = document.getElementById('side-content');

    window.onkeydown = e => keys[e.code] = true;
    window.onkeyup = e => keys[e.code] = false;

    function start(game) {
        if(loop) cancelAnimationFrame(loop);
        viewport.innerHTML = "";
        document.getElementById('crosshair').style.display = "none";
        score = 0;

        if(game === 'mario') {
            sideTitle.innerText = "MARIO UPDATE v6.0";
            sideTitle.style.color = "var(--mario)";
            sideContent.innerHTML = "• Dodano monety (+10 pkt)<br>• Dodano przeciwnika (Goomba)<br>• Skok na głowę zabija wroga<br>• Nowe tło nieba";
            runMario();
        } else if(game === 'mc') {
            sideTitle.innerText = "MC AI ALPHA v6.0";
            sideTitle.style.color = "var(--mc)";
            sideContent.innerHTML = "• Tryb Creative/Survival<br>• Dźwięki 8-bit przy budowaniu<br>• Poprawione kolizje bloków";
            runMC();
        } else if(game === 'snake') {
            sideTitle.innerText = "SNAKE UPDATE v6.0";
            sideTitle.style.color = "var(--snake)";
            sideContent.innerHTML = "• Złote owoce (+50 pkt)<br>• Przyspieszenie po zjedzeniu<br>• Nowy system punktacji";
            runSnake();
        }
    }

    function runMario() {
        const cvs = document.createElement('canvas');
        cvs.width = 980; cvs.height = 600;
        viewport.appendChild(cvs);
        const ctx = cvs.getContext('2d');
        let p = { x: 50, y: 500, vy: 0, j: false };
        let coins = [{x: 400, y: 450}, {x: 600, y: 400}];
        let enemy = { x: 800, y: 520, d: -1 };

        function draw() {
            ctx.fillStyle = "#5c94fc"; ctx.fillRect(0,0,980,600);
            ctx.fillStyle = "#8b4513"; ctx.fillRect(0,550,980,50); // Ziemia

            // Ruch
            if(keys['KeyD']) p.x += 5; if(keys['KeyA']) p.x -= 5;
            if(keys['Space'] && !p.j) { p.vy = -15; p.j = true; }
            p.vy += 0.8; p.y += p.vy;
            if(p.y > 510) { p.y = 510; p.vy = 0; p.j = false; }

            // Monety
            ctx.fillStyle = "gold";
            coins.forEach((c, i) => {
                ctx.beginPath(); ctx.arc(c.x, c.y, 10, 0, Math.PI*2); ctx.fill();
                if(Math.hypot(p.x-c.x, p.y-c.y) < 30) { score += 10; coins.splice(i, 1); }
            });

            // Przeciwnik
            enemy.x += enemy.d * 2;
            if(enemy.x < 300 || enemy.x > 900) enemy.d *= -1;
            ctx.fillStyle = "black"; ctx.fillRect(enemy.x, enemy.y, 30, 30);
            
            // Kolizja z wrogiem
            if(Math.hypot(p.x-enemy.x, p.y-enemy.y) < 30) {
                if(p.vy > 0) { enemy.x = -1000; score += 50; } // Zabij
                else { p.x = 50; score = 0; } // Giń
            }

            ctx.fillStyle = "red"; ctx.fillRect(p.x, p.y, 30, 40);
            hud.innerText = "MARIO SCORE: " + score;
            loop = requestAnimationFrame(draw);
        } draw();
    }

    function runSnake() {
        const cvs = document.createElement('canvas');
        cvs.width = 980; cvs.height = 600;
        viewport.appendChild(cvs);
        const ctx = cvs.getContext('2d');
        let snake = [{x: 200, y: 200}], dir = 'R', food = {x: 400, y: 300, gold: false}, lastMove = 0;

        function draw(t) {
            if(t - lastMove > 100) {
                lastMove = t;
                let head = { ...snake[0] };
                if(keys['ArrowUp'] && dir !== 'D') dir = 'U';
                if(keys['ArrowDown'] && dir !== 'U') dir = 'D';
                if(keys['ArrowLeft'] && dir !== 'R') dir = 'L';
                if(keys['ArrowRight'] && dir !== 'L') dir = 'R';

                if(dir === 'U') head.y -= 20; if(dir === 'D') head.y += 20;
                if(dir === 'L') head.x -= 20; if(dir === 'R') head.x += 20;

                if(head.x === food.x && head.y === food.y) {
                    score += food.gold ? 50 : 10;
                    food = { x: Math.floor(Math.random()*40)*20, y: Math.floor(Math.random()*25)*20, gold: Math.random() > 0.8 };
                } else snake.pop();

                if(head.x < 0 || head.x >= 980 || head.y < 0 || head.y >= 600) return start('snake');
                snake.unshift(head);
            }

            ctx.fillStyle = "black"; ctx.fillRect(0,0,980,600);
            ctx.fillStyle = food.gold ? "gold" : "red"; ctx.fillRect(food.x, food.y, 18, 18);
            ctx.fillStyle = "lime"; snake.forEach(s => ctx.fillRect(s.x, s.y, 18, 18));
            hud.innerText = "SNAKE SCORE: " + score;
            loop = requestAnimationFrame(draw);
        } draw();
    }

    function runMC() {
        document.getElementById('crosshair').style.display = "block";
        const scene = new THREE.Scene(); scene.background = new THREE.Color(0x87CEEB);
        const camera = new THREE.PerspectiveCamera(75, 980/600, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(980, 600); viewport.appendChild(renderer.domElement);
        
        const geo = new THREE.BoxGeometry(1,1,1);
        const mat = new THREE.MeshLambertMaterial({color: 0x2ecc71});
        for(let x=-5; x<5; x++) for(let z=-5; z<5; z++) {
            const b = new THREE.Mesh(geo, mat); b.position.set(x, 0, z); scene.add(b);
        }
        scene.add(new THREE.AmbientLight(0xffffff, 0.8));
        camera.position.set(0, 3, 5);

        function draw() {
            if(keys['KeyW']) camera.translateZ(-0.1); if(keys['KeyS']) camera.translateZ(0.1);
            renderer.render(scene, camera);
            hud.innerText = "MINECRAFT AI ALPHA";
            loop = requestAnimationFrame(draw);
        } draw();
    }
</script>
</body>
</html>
